! R1 â€“ Security Lab ACL + SSH + Router-on-a-Stick
hostname R1
no ip domain-lookup

! SSH prerequisites ---
username admin privilege 15 secret cisco123
ip domain-name lab.local
crypto key generate rsa
ip ssh version 2

! Router-on-a-Stick - - - 
interface GigabitEthernet0/0
 no shutdown
!
interface GigabitEthernet0/0.10
 encapsulation dot1Q 10
 ip address 192.168.10.1 255.255.255.0
 description Admin VLAN
!
interface GigabitEthernet0/0.20
 encapsulation dot1Q 20
 ip address 192.168.20.1 255.255.255.0
 description Office VLAN
 ip access-group OFFICE_TO_ADMIN in
!
! ACLs --- -
ip access-list extended OFFICE_TO_ADMIN
 remark Allow ICMP only from Office to Admin
 permit icmp 192.168.20.0 0.0.0.255 192.168.10.0 0.0.0.255
 deny ip 192.168.20.0 0.0.0.255 192.168.10.0 0.0.0.255 log
 permit ip any any
!
ip access-list standard ADMIN_SSH
 permit 192.168.10.0 0.0.0.255
!
! VTY lines (SSH only from Admin VLAN) ----
line vty 0 4
 login local
 transport input ssh
 access-class ADMIN_SSH in

end
wr mem
